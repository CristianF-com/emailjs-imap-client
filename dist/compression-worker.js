'use strict';

var _compression = require('./compression');

var _compression2 = _interopRequireDefault(_compression);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var MESSAGE_INITIALIZE_WORKER = 'start';
var MESSAGE_INFLATE = 'inflate';
var MESSAGE_INFLATED_DATA_READY = 'inflated_ready';
var MESSAGE_DEFLATE = 'deflate';
var MESSAGE_DEFLATED_DATA_READY = 'deflated_ready';

var createMessage = function createMessage(message, buffer) {
  return { message: message, buffer: buffer };
};

var inflatedReady = function inflatedReady(buffer) {
  return self.postMessage(createMessage(MESSAGE_INFLATED_DATA_READY, buffer), [buffer]);
};
var deflatedReady = function deflatedReady(buffer) {
  return self.postMessage(createMessage(MESSAGE_DEFLATED_DATA_READY, buffer), [buffer]);
};
var compressor = new _compression2.default(inflatedReady, deflatedReady);

self.onmessage = function (e) {
  var message = e.data.message;
  var buffer = e.data.buffer;

  switch (message) {
    case MESSAGE_INITIALIZE_WORKER:
      break;

    case MESSAGE_INFLATE:
      compressor.inflate(buffer);
      break;

    case MESSAGE_DEFLATE:
      compressor.deflate(buffer);
      break;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21wcmVzc2lvbi13b3JrZXIuanMiXSwibmFtZXMiOlsiTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUiIsIk1FU1NBR0VfSU5GTEFURSIsIk1FU1NBR0VfSU5GTEFURURfREFUQV9SRUFEWSIsIk1FU1NBR0VfREVGTEFURSIsIk1FU1NBR0VfREVGTEFURURfREFUQV9SRUFEWSIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwiYnVmZmVyIiwiaW5mbGF0ZWRSZWFkeSIsInNlbGYiLCJwb3N0TWVzc2FnZSIsImRlZmxhdGVkUmVhZHkiLCJjb21wcmVzc29yIiwib25tZXNzYWdlIiwiZSIsImRhdGEiLCJpbmZsYXRlIiwiZGVmbGF0ZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7O0FBRUEsSUFBTUEsNEJBQTRCLE9BQWxDO0FBQ0EsSUFBTUMsa0JBQWtCLFNBQXhCO0FBQ0EsSUFBTUMsOEJBQThCLGdCQUFwQztBQUNBLElBQU1DLGtCQUFrQixTQUF4QjtBQUNBLElBQU1DLDhCQUE4QixnQkFBcEM7O0FBRUEsSUFBTUMsZ0JBQWdCLFNBQWhCQSxhQUFnQixDQUFDQyxPQUFELEVBQVVDLE1BQVY7QUFBQSxTQUFzQixFQUFFRCxnQkFBRixFQUFXQyxjQUFYLEVBQXRCO0FBQUEsQ0FBdEI7O0FBRUEsSUFBTUMsZ0JBQWdCLFNBQWhCQSxhQUFnQjtBQUFBLFNBQVVDLEtBQUtDLFdBQUwsQ0FBaUJMLGNBQWNILDJCQUFkLEVBQTJDSyxNQUEzQyxDQUFqQixFQUFxRSxDQUFDQSxNQUFELENBQXJFLENBQVY7QUFBQSxDQUF0QjtBQUNBLElBQU1JLGdCQUFnQixTQUFoQkEsYUFBZ0I7QUFBQSxTQUFVRixLQUFLQyxXQUFMLENBQWlCTCxjQUFjRCwyQkFBZCxFQUEyQ0csTUFBM0MsQ0FBakIsRUFBcUUsQ0FBQ0EsTUFBRCxDQUFyRSxDQUFWO0FBQUEsQ0FBdEI7QUFDQSxJQUFJSyxhQUFhLDBCQUFlSixhQUFmLEVBQThCRyxhQUE5QixDQUFqQjs7QUFFQUYsS0FBS0ksU0FBTCxHQUFpQixVQUFVQyxDQUFWLEVBQWE7QUFDNUIsTUFBTVIsVUFBVVEsRUFBRUMsSUFBRixDQUFPVCxPQUF2QjtBQUNBLE1BQU1DLFNBQVNPLEVBQUVDLElBQUYsQ0FBT1IsTUFBdEI7O0FBRUEsVUFBUUQsT0FBUjtBQUNFLFNBQUtOLHlCQUFMO0FBQ0U7O0FBRUYsU0FBS0MsZUFBTDtBQUNFVyxpQkFBV0ksT0FBWCxDQUFtQlQsTUFBbkI7QUFDQTs7QUFFRixTQUFLSixlQUFMO0FBQ0VTLGlCQUFXSyxPQUFYLENBQW1CVixNQUFuQjtBQUNBO0FBVko7QUFZRCxDQWhCRCIsImZpbGUiOiJjb21wcmVzc2lvbi13b3JrZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcHJlc3NvciBmcm9tICcuL2NvbXByZXNzaW9uJ1xuXG5jb25zdCBNRVNTQUdFX0lOSVRJQUxJWkVfV09SS0VSID0gJ3N0YXJ0J1xuY29uc3QgTUVTU0FHRV9JTkZMQVRFID0gJ2luZmxhdGUnXG5jb25zdCBNRVNTQUdFX0lORkxBVEVEX0RBVEFfUkVBRFkgPSAnaW5mbGF0ZWRfcmVhZHknXG5jb25zdCBNRVNTQUdFX0RFRkxBVEUgPSAnZGVmbGF0ZSdcbmNvbnN0IE1FU1NBR0VfREVGTEFURURfREFUQV9SRUFEWSA9ICdkZWZsYXRlZF9yZWFkeSdcblxuY29uc3QgY3JlYXRlTWVzc2FnZSA9IChtZXNzYWdlLCBidWZmZXIpID0+ICh7IG1lc3NhZ2UsIGJ1ZmZlciB9KVxuXG5jb25zdCBpbmZsYXRlZFJlYWR5ID0gYnVmZmVyID0+IHNlbGYucG9zdE1lc3NhZ2UoY3JlYXRlTWVzc2FnZShNRVNTQUdFX0lORkxBVEVEX0RBVEFfUkVBRFksIGJ1ZmZlciksIFtidWZmZXJdKVxuY29uc3QgZGVmbGF0ZWRSZWFkeSA9IGJ1ZmZlciA9PiBzZWxmLnBvc3RNZXNzYWdlKGNyZWF0ZU1lc3NhZ2UoTUVTU0FHRV9ERUZMQVRFRF9EQVRBX1JFQURZLCBidWZmZXIpLCBbYnVmZmVyXSlcbnZhciBjb21wcmVzc29yID0gbmV3IENvbXByZXNzb3IoaW5mbGF0ZWRSZWFkeSwgZGVmbGF0ZWRSZWFkeSlcblxuc2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICBjb25zdCBtZXNzYWdlID0gZS5kYXRhLm1lc3NhZ2VcbiAgY29uc3QgYnVmZmVyID0gZS5kYXRhLmJ1ZmZlclxuXG4gIHN3aXRjaCAobWVzc2FnZSkge1xuICAgIGNhc2UgTUVTU0FHRV9JTklUSUFMSVpFX1dPUktFUjpcbiAgICAgIGJyZWFrXG5cbiAgICBjYXNlIE1FU1NBR0VfSU5GTEFURTpcbiAgICAgIGNvbXByZXNzb3IuaW5mbGF0ZShidWZmZXIpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSBNRVNTQUdFX0RFRkxBVEU6XG4gICAgICBjb21wcmVzc29yLmRlZmxhdGUoYnVmZmVyKVxuICAgICAgYnJlYWtcbiAgfVxufVxuIl19